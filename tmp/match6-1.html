<HTML>
<HEAD>
<TITLE>aswamin1_ca1/</TITLE>
</HEAD>
<BODY BGCOLOR=white>
<HR>
harini/<p><PRE>
&gt;&gt;&gt;&gt; file: ProcessHier.c
#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;sys/types.h&gt;
#include &lt;unistd.h&gt;
#include &lt;sys/wait.h&gt;

<A NAME="1"></A><FONT color = #00FF00><A HREF="match6-0.html#1" TARGET="0"><IMG SRC="http://moss.stanford.edu/bitmaps/tm_1_24.gif" ALT="other" BORDER="0" ALIGN=left></A>

int main( int argc,char * argv[] )
{
        pid_t child_pid;
        int H,C,status;
        sscanf(argv[1],"%d",&H);
        if(H == 1)	
	{
           return 0;
        }
        int my_pid = getpid();
	int parent_pid = getppid();
</FONT>	printf("\t process id %d : Process Starting at %d \n",getpid(),getpid());
        printf("\t \t    %d : Parents pid = %d\n",getpid(),getppid());
        printf("\t \t    %d : Height in the tree = %s \n",getpid(),argv[1]);
<A NAME="0"></A><FONT color = #FF0000><A HREF="match6-0.html#0" TARGET="0"><IMG SRC="http://moss.stanford.edu/bitmaps/tm_0_53.gif" ALT="other" BORDER="0" ALIGN=left></A>

        printf("\t \t    %d : Creating %s Children at the height in the tree %d\n",getpid(),argv[2],H-1);
        sscanf(argv[2],"%d",&C);
        
        while(C&gt;0)
	{
        child_pid = fork();

	if(child_pid==0)
		{
		if(H&gt;0){
                char str_height[15];
		sprintf(str_height,"%d",H-1);
                char* arg_list[] = {"ProcessHier",str_height,argv[2],NULL};
                execvp("./ProcessHier",arg_list);
                }

               }
		else if(child_pid &gt; 1){
		
                if(C-1 == 0){
			
			//wait(&status);
                        while(wait(NULL)&gt;0)
			{
                       	}
                        printf("\t \t    Terminating at Height   %d\n",H-1);
</FONT>                }
        }
	else
	{		
		printf("Fork Error : %d",H);
	}
        C--;
        }
        return 0;
}
</PRE>
</PRE>
</BODY>
</HTML>
