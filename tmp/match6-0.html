<HTML>
<HEAD>
<TITLE>aswamin1_ca1/</TITLE>
</HEAD>
<BODY BGCOLOR=white>
<HR>
aswamin1_ca1/<p><PRE>
&gt;&gt;&gt;&gt; file: aswamin1_ca1.c
#include&lt;stdio.h&gt;
#include&lt;sys/types.h&gt;
#include&lt;sys/wait.h&gt;
#include&lt;unistd.h&gt;

<A NAME="1"></A><FONT color = #00FF00><A HREF="match6-1.html#1" TARGET="1"><IMG SRC="http://moss.stanford.edu/bitmaps/tm_1_20.gif" ALT="other" BORDER="0" ALIGN=left></A>

int main(int argc,char * argv[]){
        pid_t child;
        int height,width,width_copy;
        sscanf(argv[1],"%d",&height);
        if(height == 1){
                return 0;
        }
        int pid = getpid();
	//This padding is for indent 
        int padding =5*(height-2);
</FONT>        printf("%*s",padding," ");
        printf("(%d):Process Starting\n",getpid());
        printf("%*s",padding," ");
        printf("(%d):Parents pid = %d\n",getpid(),getppid());
        printf("%*s",padding," ");
        printf("(%d):Height in the tree = %s \n",getpid(),argv[1]);
        printf("%*s",padding," ");
<A NAME="0"></A><FONT color = #FF0000><A HREF="match6-1.html#0" TARGET="1"><IMG SRC="http://moss.stanford.edu/bitmaps/tm_0_44.gif" ALT="other" BORDER="0" ALIGN=left></A>

        printf("(%d):Creating %s Children at height : %d\n",getpid(),argv[2],height-1);
        sscanf(argv[2],"%d",&width);
        
        while(width&gt;0){
        child = fork();
        if(child==0){
		// Inside Child Process
                if(height&gt;0){
                char str_height[15];
		// Create H-1 and C number of children as params
                sprintf(str_height,"%d",height-1);
                char* arg_list[] = {"aswamin1_ca1_out",str_height,argv[2],NULL};
                execvp("./aswamin1_ca1_out",arg_list);
                }
        }else if(child &gt; 1){
		//Condition to see if this is the last child at this branch
                if(width-1 == 0){
			// wait for all child to die
                        while(wait(NULL)&gt;0){
                                //printf("Waiting\n");
				//loops until all child process has ended  
                        }
                        printf("%*s",padding," ");
</FONT>                        printf("Terminating at Height : %d\n",height-1);
                }
        }else{
		// couldn't create child process
		printf("There was error in fork at height : %d",height);
	}
        width--;
        }
        return 0;
}
</PRE>
</PRE>
</BODY>
</HTML>
